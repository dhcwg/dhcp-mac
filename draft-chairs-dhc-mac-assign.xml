<?xml version="1.0" encoding="US-ASCII"?>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
<?rfc strict="yes" ?>
<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<rfc category="std" docName="draft-chairs-dhc-mac-assign-00"
     ipr="pre5378Trust200902">
  <front>
    <title abbrev="MAC address assignment in DHCPv6">Link Layer
    Addresses Assignment Mechanism for DHCPv6</title>

    <author fullname="Bernie Volz" initials="B" surname="Volz">
      <organization abbrev="Cisco">Cisco Systems, Inc.</organization>

      <address>
        <postal>
          <street>1414 Massachusetts Ave</street>
          <city>Boxborough, MA 01719</city>
          <country>USA</country>
        </postal>
        <email>volz@cisco.com</email>
      </address>
    </author>

    <author fullname="Tomek Mrugalski" initials="T."
            surname="Mrugalski">
      <organization abbrev="ISC">Internet Systems Consortium,
      Inc.</organization>
      <address>
        <postal>
          <street>950 Charter Street</street>
          <city>Redwood City</city>
          <region>CA</region>
          <code>94063</code>
          <country>USA</country>
        </postal>
        <email>tomasz.mrugalski@gmail.com</email>
      </address>
    </author>

    <date />

    <area>Internet</area>

    <workgroup>Dynamic Host Configuration (DHC)</workgroup>

    <keyword>DHCPv6</keyword>

    <keyword>Link-layer</keyword>

    <keyword>assignment</keyword>

    <!--  SECTION 0:  Abstract                      -->

    <abstract>
      <t>In certain evironments, e.g. large scale virtualization, new
      devices are created in automated manner. Such devices typically
      have their link layer (MAC) addresses randomized. With
      sufficient scale the likelihood of collision is not
      acceptable. Therefore an allocation mechanism is required. This
      draft proposes an extension to DHCPv6 that allows a scalable
      approach to link layer address assignments.</t>

    </abstract>
  </front>

  <middle>
    <section anchor="intro" title="Introduction">
      <!-- 1, line 230-->

      <t>There are several new deployment types that deal with a large
      number of devices that need to initialized. One of them is a
      scenario where VM (virtual machines) are created on a massive
      scale. Typically the new VM instances are assigned a random link
      layer (MAC) address, but that does not scale well due to
      birthday paradox. Another use case are IOT devices. Typically
      there is no need to provide global uniqueness of MAC addresses
      for such devices. On the other hand, huge number of such devices
      would likely exhause vendor's OUI (Organization's Unique
      Identifier) global address space. For those reasons, it is
      desired to have some form of local authority that would be able
      to assign MAC addresses.</t>

      <t>This document proposes a new mechanism that extends DHCPv6
      operation to handle MAC address assignments.</t>

      <t>Since DHCPv6 is a protocol that can allocate variouse types
      of resources (non-temporary addresses, temporary addresses,
      prefixes, but also many options) and has necessary
      infrastructure to maintain such assignment, it is a good
      candidate for requested functionality.</t>
    </section>

    <section anchor="requirements" title="Requirements">
      <!-- TODO: upgrade to RFC XXXX -->
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref target="RFC2119"/> when they
      appear in ALL CAPS.  When these words are not in ALL CAPS (such as
      "should" or "Should"), they have their usual English meanings, and
      are not to be interpreted as <xref target="RFC2119"/> key words.</t>
    </section>    

    <section anchor="overview" title="Mechanism overview">

      <t>TODO: Describe two use cases: 1) Hypervisor that requests MAC
      address(es) on behalf of the VM to be spawned 2) a new IOT
      device booting up requesting its own MAC address. For scenario
      2) cover how DHCP (or IP packets in general) are sent without
      having stable MAC address. Use Temporary MAC address for
      anonymity, IEEE 802.11-02/109r0) (can this be used in other
      networks than 802.11?)</t>

      <t>TODO: How client can signal that X addresses are needed?</t>

      <t>TODO: How client renews/releases? Make sure that the whole
      block is always renewed/released. Further fragments are not
      allowed.</t>

      <t>TODO: What the server should do if client asks for X
      addresses, but for whatever reason (running out or policy), the
      server is only able to assign Y.</t>

      <t>TODO:  The hypervisor
      will start with certain number of MAC addresses and then will
      keep asking for more over time. We either need IA_ID to identify
      separate blocks or some way of compacting existing ranges into
      bigger ones if they's continuous.</t>
    </section>

    <section anchor="option" title="Option definitions">

      <t>TODO: Need to define option formats here. There are 3
      possible approaches. 1) a single MAC address (which isn't
      flexible and would raise the same objections people now have for
      IA_NA) 2) min-max (which seems the most flexible) and 3) do
      assignments with bit lengths, similar to IA_PD (this wouldn't
      work too well, because the address space for a single OUI is
      only 24 bits).</t>
    </section>

    <section anchor="client" title="Client behavior">
      <t>TODO: We need start this section by clearly defining what
      'client' means in this context (either hypervisor acting on
      behalf of the client to be spawned or the IOT device acting on
      its own behalf).</t>
    </section>

    <section anchor="server" title="Server behavior">
      <t>TODO: Need to describe server operation. </t>
    </section>

    <section anchor="security" title="Security Considerations">
    </section>    

    <section anchor="privacy" title="Privacy Considerations">
    </section>    
    
    <!-- ends: "25 from line 4764-->
  </middle>

  <back>
    <references title="Normative References">

      <?rfc include='reference.RFC.2119'?>

      <?rfc include='reference.RFC.3315'?>

    </references>

    <references title="Informative References">

       <reference anchor="IANA-RESERVED-IID">
        <front>
          <title>
              Reserved IPv6 Interface Identifiers
              http://www.iana.org/assignments/ipv6-interface-ids/ipv6-interface-ids.xml
              </title>

          <author>
            <organization>IANA</organization>
          </author>

          <date />
        </front>
      </reference>

    </references>

  </back>
</rfc>

